---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { Icon } from "astro-icon/components";
import MainCard from "@/components/MainCard.astro";
import BaseCard from "@/components/BaseCard.astro";
import LinkCard from "@/components/mdx/LinkCard.astro";
import FriendCard from "@/components/mdx/FriendCard.astro";
import Card from "@/components/temple/Card.astro";
import CardGroup from "@/components/temple/CardGroup.astro";
import Showcase from "@/components/mdx/Showcase.astro";
import Giscus from "@/components/comments/Giscus.astro";
import Waline from "@/components/comments/Waline.astro";
import { commentsConfig } from "@config";

const sites = [{ name: "Kael Demo", url: "https://zayck-demo.pages.dev" }];
---

<BaseLayout title="Friends">
  <CardGroup cols="1">
    <MainCard
      infoIcon="lucide:link"
    >
      <div class="space-y-10">
        <!-- Friends Section -->
        <section>
          <h2 class="text-2xl font-bold mb-6 flex items-center gap-2">
            <Icon name="lucide:users" class="w-6 h-6 text-primary" />
            <span>Friends</span>
          </h2>

          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
            <FriendCard
              name="Kael"
              avatar="/goat.png"
              description="ä¸€ä¸ªæŠ€èƒ½æ ‘è¶Šç‚¹è¶Šæ­ªçš„ä¸ªäººåšä¸»ğŸ˜œ"
              url="https://zayck.pages.dev"
              type="friend"
            />
            <FriendCard
              name="Firefly"
              avatar="https://zayck-img.pages.dev/file/1765005605410_BandiView_firefly.webp"
              description="è™šä½ä»¥å¾…ï¼"
              url="https://zayck-firefly.pages.dev"
              type="friend"
            />

          </div>
          <div class="divider my-8">
            <Icon name="lucide:heart" class="w-10 h-10 text-primary" />
          </div>
        </section>
      </div>
    </MainCard>

    <Card>
      <div class="p-4 sm:p-6">
        <div class="space-y-6">
          <section>
            <h2 class="text-2xl font-bold mb-4 flex items-center gap-2">
              <Icon name="lucide:link" class="w-6 h-6 text-primary" />
              <span>å‹é“¾ç”³è¯·</span>
            </h2>
        
            <p class="text-base-content/70 mb-4">
              ç”³è¯·å‹é“¾å‰<strong>è¯·å…ˆåœ¨è‡ªå·±ç½‘ç«™æ·»åŠ æœ¬ç«™å‹é“¾</strong>ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹ä¿¡æ¯ï¼š
            </p>

            <!-- å¯å¤åˆ¶çš„ä»£ç å— -->
            <div class="relative group mb-4">
              <pre class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4 overflow-x-auto text-sm"><code id="link-code">åç§°ï¼šZayck' Blog
ç½‘å€ï¼šhttps://zayck.pages.dev
å¤´åƒï¼ˆæ–¹ï¼‰ï¼šhttps://zayck-img.pages.dev/file/1764984969206_logo.png
å¤´åƒï¼ˆåœ†ï¼‰ï¼šhttps://zayck-img.pages.dev/file/1765341096109_goat-r.png
æè¿°ï¼šä¸€ä¸ªæŠ€èƒ½æ ‘è¶Šç‚¹è¶Šæ­ªçš„ä¸ªäººåšä¸»ğŸ˜œ</code></pre>
              <button 
                id="copy-btn" 
                class="absolute top-2 right-2 px-3 py-1 bg-primary text-primary-content rounded-md text-xs opacity-0 group-hover:opacity-100 transition-opacity hover:bg-primary-focus"
                onclick="copyCode()"
              >
                <Icon name="lucide:copy" class="w-4 h-4" />
                å¤åˆ¶
              </button>
            </div>

            <p class="text-base-content/70 mb-4">
              è¯·åœ¨æ·»åŠ å‹é“¾æ—¶ä½¿ç”¨ä»¥ä¸Šä¿¡æ¯ï¼Œç¡®ä¿ä¿¡æ¯å‡†ç¡®æ— è¯¯ã€‚æ·»åŠ å®Œæˆåï¼Œè¯·é€šè¿‡<strong>ä¸‹æ–¹è¯„è®ºæˆ–å…¶ä»–è”ç³»æ–¹å¼</strong>å‘ŠçŸ¥æˆ‘ï¼Œ<strong>å¹¶æä¾›ä½ çš„ç½‘ç«™ä¿¡æ¯</strong>ã€‚æˆ‘ä¼šå°½å¿«æ·»åŠ ä½ çš„å‹é“¾ã€‚
            </p>
            <ul class="list-disc list-inside text-base-content/70 space-y-2">
              <li>äº’æ¢åŸåˆ™ï¼šè¯·å…ˆå°†æœ¬ç«™æ·»åŠ åˆ°ä½ çš„å‹é“¾é¡µé¢ï¼Œæˆ‘ä¼šåœ¨ç¡®è®¤åæ·»åŠ ä½ çš„å‹é“¾</li>
              <li>é“¾æ¥ç»´æŠ¤ï¼šå¦‚å‘ç°å‹é“¾ç½‘ç«™é•¿æœŸæ— æ³•è®¿é—®æˆ–å†…å®¹è¿è§„ï¼Œå°†ä¼šç§»é™¤å‹é“¾</li>
              <li>ç½‘ç«™å†…å®¹ç§¯æå‘ä¸Šï¼Œæ— è¿æ³•è¿è§„ä¿¡æ¯</li>
              <li>ä¸å…è®¸å«æœ‰ç—…æ¯’ã€æœ¨é©¬ã€æ¶æ„ä»£ç ã€å¼¹å‡ºå¹¿å‘Šä»¥åŠä»»ä½•å±å®³ä»–äººè®¡ç®—æœºå®‰å…¨çš„å†…å®¹</li>
              <li>ä¸èƒ½æœ‰ä»»ä½•å«è‰²æƒ…/ååŠ¨/æš´åŠ›ç­‰ä¸æ³•å†…å®¹</li>
              <li>ç½‘ç«™èƒ½åœ¨å›½å†…æ­£å¸¸è®¿é—®ï¼ŒåŠ è½½é€Ÿåº¦åˆç†</li>
              <li>ç½‘ç«™æœ‰æŒç»­çš„å†…å®¹æ›´æ–°ï¼Œä¸æ˜¯åºŸå¼ƒç«™ç‚¹</li>
              <li>ç½‘ç«™æ”¯æŒHTTPSè®¿é—®</li>
              <li>ç½‘ç«™ä»¥åŸåˆ›å†…å®¹ä¸ºä¸»ï¼Œéçº¯é‡‡é›†ç«™</li>
              <li>æœ‰15ç¯‡ä»¥ä¸Šçš„åŸåˆ›æ–‡ç« </li>


            </ul>

          </section>
        </div>
      </div>
    </Card>

    <!-- Comments Section -->
    {commentsConfig?.enable && commentsConfig.type === "giscus" && commentsConfig.giscus && (
      <section class="comments mt-6">
        <Giscus {...commentsConfig.giscus} />
      </section>
    )}
    {commentsConfig?.enable && commentsConfig.type === "waline" && commentsConfig.waline && (
      <section class="comments mt-6">
        <Waline {...commentsConfig.waline} />
      </section>
    )}

    <!-- å¤åˆ¶ä»£ç çš„JavaScriptå‡½æ•° -->
    <script is:inline>
      // ç›´æ¥å®šä¹‰å…¨å±€å‡½æ•°ï¼Œç¡®ä¿æŒ‰é’®å¯ä»¥è°ƒç”¨
      function copyCode() {
        // ç›´æ¥å®šä¹‰è¦å¤åˆ¶çš„å†…å®¹
        const codeText = `åç§°ï¼šZayck' Blog
ç½‘å€ï¼šhttps://zayck.pages.dev
å¤´åƒï¼ˆæ–¹ï¼‰ï¼šhttps://zayck-img.pages.dev/file/1764984969206_logo.png
å¤´åƒï¼ˆåœ†ï¼‰ï¼šhttps://zayck-img.pages.dev/file/1765341096109_goat-r.png
æè¿°ï¼šä¸€ä¸ªæŠ€èƒ½æ ‘è¶Šç‚¹è¶Šæ­ªçš„ä¸ªäººåšä¸»ğŸ˜œ`;
        
        // åˆ›å»ºæ–‡æœ¬åŒºåŸŸå…ƒç´ 
        const textArea = document.createElement('textarea');
        textArea.value = codeText;
        
        // ç¡®ä¿æ–‡æœ¬åŒºåŸŸä¸å¯è§ä½†å¯é€‰æ‹©
        textArea.style.position = 'fixed';
        textArea.style.left = '-9999px';
        textArea.style.top = '-9999px';
        
        // æ·»åŠ åˆ°é¡µé¢
        document.body.appendChild(textArea);
        
        // é€‰æ‹©å¹¶å¤åˆ¶å†…å®¹
        textArea.select();
        textArea.setSelectionRange(0, 99999); // ç¡®ä¿å…¨é€‰
        
        try {
          // æ‰§è¡Œå¤åˆ¶å‘½ä»¤
          const successful = document.execCommand('copy');
          
          if (successful) {
            // è·å–å¤åˆ¶æŒ‰é’®
            const copyBtn = document.getElementById('copy-btn');
            // ä¿å­˜åŸå§‹å†…å®¹
            const originalContent = copyBtn.innerHTML;
            
            // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
            copyBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4"><polyline points="20 6 9 17 4 12"></polyline></svg> å·²å¤åˆ¶';
            copyBtn.classList.remove('bg-primary');
            copyBtn.classList.add('bg-success');
            
            // 2ç§’åæ¢å¤åŸçŠ¶
            setTimeout(() => {
              copyBtn.innerHTML = originalContent;
              copyBtn.classList.remove('bg-success');
              copyBtn.classList.add('bg-primary');
            }, 2000);
          } else {
            console.error('å¤åˆ¶å¤±è´¥ï¼šexecCommandè¿”å›false');
            alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©å†…å®¹å¤åˆ¶');
          }
        } catch (err) {
          console.error('å¤åˆ¶è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:', err);
          alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©å†…å®¹å¤åˆ¶');
        } finally {
          // æ¸…ç†ä¸´æ—¶å…ƒç´ 
          if (textArea && textArea.parentNode) {
            document.body.removeChild(textArea);
          }
        }
      }
      
      // é¡µé¢åŠ è½½å®Œæˆåç»‘å®šäº‹ä»¶
      document.addEventListener('DOMContentLoaded', function() {
        const copyBtn = document.getElementById('copy-btn');
        if (copyBtn) {
          copyBtn.addEventListener('click', copyCode);
        }
      });
    </script>
  </CardGroup>
</BaseLayout>
